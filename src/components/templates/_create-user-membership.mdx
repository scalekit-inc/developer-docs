import { Tabs, TabItem } from '@astrojs/starlight/components';

<Tabs syncKey="tech-stack">
  <TabItem value="node" label="Node.js">
    ```javascript wrap
    const newUser = await scalekit.user.createUserAndMembership('org_xxxxxxxxxxxx', {
      email: "user@example.com",
      externalId: "crm-user-87425",
      userProfile: {
        firstName: "John",
        lastName: "Doe"
      },
      metadata: {
        plan: "free",
        department: "Engineering"
      },
      sendInvitationEmail: true
    });
    ```
  </TabItem>
  <TabItem value="python" label="Python">
    ```python
    
    from scalekit import ScalekitClient
    from scalekit.v1.users.users_pb2 import CreateUser, CreateUserProfile

    # Initialize scalekit client
    scalekit = ScalekitClient(
            <'SCALEKIT_ENV_URL'>,
            <'SCALEKIT_CLIENT_ID'>,
            <'SCALEKIT_CLIENT_SECRET'>)

    # Create user object
    user = CreateUser(
        email="user@example.com",
        external_id="crm-user-87425",
        user_profile=CreateUserProfile(
            first_name="John",
            last_name="Doe"
        ),
        metadata={
            "plan": "free",
            "department": "Engineering"
        }
    )

    # Create the user
    new_user = scalekit.users.create_user_and_membership(organization_id='org_xxxxxxxxxxxx', user=user)
    ```
  </TabItem>
  <TabItem value="go" label="Go">
    ```go
    import (
        "context"
        usersv1 "github.com/scalekit-inc/scalekit-sdk-go/pkg/grpc/scalekit/v1/users"
    )

    user := &usersv1.CreateUser{
        Email: "user@example.com",
        ExternalId: "crm-user-87425",
        UserProfile: &usersv1.CreateUserProfile{
            FirstName: "John",
            LastName:  "Doe",
        },
        Metadata: map[string]string{
            "plan": "free",
            "department":       "Engineering",
        },
    }

    newUser, err := scalekit.User().CreateUserAndMembership(
        context.Background(),
        "org_xxxxxxxxxxxx", // The ID of the organization the user belongs to
        user,
        false, // sendInvitationEmail
    )
    if err != nil {
        // handle error appropriately
        return err
    }
    ```
  </TabItem>
  <TabItem value="java" label="Java">
    ```java
    import com.scalekit.grpc.scalekit.v1.users.*;

    CreateUserAndMembershipRequest request = CreateUserAndMembershipRequest.newBuilder()
        .setUser(CreateUser.newBuilder()
            .setEmail("user@example.com")
            .setExternalId("crm-user-87425")
            .setUserProfile(CreateUserProfile.newBuilder()
                .setFirstName("John")
                .setLastName("Doe")
                .build())
            .putMetadata("plan", "free")
            .putMetadata("department", "Engineering")
            .build())
        .build();

    CreateUserAndMembershipResponse newUser = scalekit.users()
        .createUserAndMembership("org_xxxxxxxxxxxx", request); // The ID of the organization the user belongs to
    ```
  </TabItem>
</Tabs>
