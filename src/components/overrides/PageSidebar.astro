---
import Default from '@astrojs/starlight/components/PageSidebar.astro'
import CodeSamples from '@/components/ui/CodeSamples.astro'

// Access route and props to reuse in child components
const { entry: routeEntry } = Astro.locals.starlightRoute
const { dir, entry, locale } = Astro.props

// Get code samples from routeEntry data instead of entry data
const codeSamples = routeEntry?.data?.codeSamples
---

<div>
  {/* Render the default PageSidebar content (TOC and mobile TOC) */}
  <Default {dir} {entry} {locale} />

  {/* Code samples section */}
  <div class="page-sidebar-actions">
    <CodeSamples codeSamples={codeSamples} />
  </div>
</div>

<style>
  .page-sidebar-actions {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding: 0.1rem var(--sl-sidebar-pad-x);
  }

  @media (max-width: 72rem) {
    .page-sidebar-actions {
      display: none;
    }
  }
</style>
