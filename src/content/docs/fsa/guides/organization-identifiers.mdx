---
title: "External identifiers & metadata"
description: "Learn how to use external IDs and custom metadata to integrate Scalekit organizations and users with your existing systems and store additional business information."
tableOfContents:
  maxHeadingLevel: 2
sidebar:
  label: "External identifiers & metadata"
prev:
  label: "Organization settings"
  link: "/fsa/guides/organization-settings/"
next:
  label: "User invitations"
  link: "/fsa/guides/user-invitations/"
head:
  - tag: style
    content: |
      .sl-markdown-content h2 {
        font-size: var(--sl-text-xl);
      }
      .sl-markdown-content h3 {
        font-size: var(--sl-text-lg);
      }
seeAlso:
  label: "Related guides"
  items:
    - title: "External identifiers in practice"
      icon: "book"
      url: "/guides/user-auth/external-id-system-integration/"

---

import { Aside, Steps, Tabs, TabItem, Card, CardGrid
 } from '@astrojs/starlight/components';

After setting up authentication and creating organizations and users, you'll often need to connect them with your existing systems. This guide shows you how to use external IDs and metadata to integrate both organizations and users with your billing platform, CRM, HR systems, or other infrastructure while storing additional custom information.

Use these features to:

- **Link existing systems** - Connect organizations and users to customer records in your billing platform, CRM, HR systems, or database
- **Store custom data** - Add billing details, feature flags, plan information, user attributes, or internal tracking data
- **Maintain data consistency** - Keep your existing identifiers while leveraging Scalekit's organization and user features
- **Simplify integration** - Avoid complex ID mapping between your systems and Scalekit

## Organization external IDs for system integration

External IDs let you identify organizations using your own identifiers instead of Scalekit's generated IDs. This is essential when migrating from existing systems or integrating with multiple platforms.

<Steps>
1. ### Set external IDs during organization creation

   Include your system's identifier when creating organizations to maintain consistent references across your infrastructure.

   <Tabs syncKey="tech-stack">
   <TabItem value="node" label="Node.js">
   ```javascript title="Create organization with external ID" {3,9}
   // During user signup or organization creation
   const organization = await scalekit.organization.create({
     display_name: 'Acme Corporation',
     external_id: 'CUST-12345-ACME', // Your customer ID
     metadata: {
       plan_type: 'enterprise',
       billing_customer_id: 'stripe_cus_abc123'
     }
   });

   console.log('Organization created:', organization.id);
   console.log('Your ID:', organization.external_id);
   ```
   </TabItem>
   <TabItem value="python" label="Python">
   ```python title="Create organization with external ID" {3,9}
   # During user signup or organization creation
   organization = scalekit.organization.create({
       'display_name': 'Acme Corporation',
       'external_id': 'CUST-12345-ACME',  # Your customer ID
       'metadata': {
           'plan_type': 'enterprise',
           'billing_customer_id': 'stripe_cus_abc123'
       }
   })

   print(f'Organization created: {organization.id}')
   print(f'Your ID: {organization.external_id}')
   ```
   </TabItem>
   <TabItem value="go" label="Go">
   ```go title="Create organization with external ID" {3,11}
   // During user signup or organization creation
   org, err := scalekit.Organization.Create(OrganizationCreateOptions{
       DisplayName: "Acme Corporation",
       ExternalId:  "CUST-12345-ACME", // Your customer ID
       Metadata: map[string]interface{}{
           "plan_type":             "enterprise",
           "billing_customer_id":   "stripe_cus_abc123",
       },
   })

   if err != nil {
       log.Fatal(err)
   }

   fmt.Printf("Organization created: %s\n", org.Id)
   fmt.Printf("Your ID: %s\n", org.ExternalId)
   ```
   </TabItem>
   <TabItem value="java" label="Java">
   ```java title="Create organization with external ID" {5,12}
   // During user signup or organization creation
   Map<String, Object> metadata = Map.of(
       "plan_type", "enterprise",
       "billing_customer_id", "stripe_cus_abc123"
   );

   Organization organization = scalekit.organization().create(
       "Acme Corporation",
       "CUST-12345-ACME", // Your customer ID
       metadata
   );

   System.out.println("Organization created: " + organization.getId());
   System.out.println("Your ID: " + organization.getExternalId());
   ```
   </TabItem>
   </Tabs>

2. ### Find organizations using your IDs

   Use external IDs to quickly locate organizations when processing webhooks, handling customer support requests, or syncing data between systems.

   <Tabs syncKey="tech-stack">
   <TabItem value="node" label="Node.js">
   ```javascript title="Find organization by external ID"
   // When processing a billing webhook or customer update
   const customerId = 'CUST-12345-ACME'; // From your webhook payload

   const organization = await scalekit.organization.getByExternalId(customerId);

   if (organization) {
     console.log('Found organization:', organization.display_name);
     // Update billing status, plan, etc.
     await updateCustomerBilling(organization.metadata.billing_customer_id);
   }
   ```
   </TabItem>
   <TabItem value="python" label="Python">
   ```python title="Find organization by external ID"
   # When processing a billing webhook or customer update
   customer_id = 'CUST-12345-ACME'  # From your webhook payload

   organization = scalekit.organization.get_by_external_id(customer_id)

   if organization:
       print(f'Found organization: {organization.display_name}')
       # Update billing status, plan, etc.
       await update_customer_billing(organization.metadata['billing_customer_id'])
   ```
   </TabItem>
   <TabItem value="go" label="Go">
   ```go title="Find organization by external ID"
   // When processing a billing webhook or customer update
   customerId := "CUST-12345-ACME" // From your webhook payload

   org, err := scalekit.Organization.GetByExternalId(customerId)
   if err != nil {
       log.Printf("Error finding organization: %v", err)
       return
   }

   if org != nil {
       fmt.Printf("Found organization: %s\n", org.DisplayName)
       // Update billing status, plan, etc.
       billingId := org.Metadata["billing_customer_id"].(string)
       updateCustomerBilling(billingId)
   }
   ```
   </TabItem>
   <TabItem value="java" label="Java">
   ```java title="Find organization by external ID"
   // When processing a billing webhook or customer update
   String customerId = "CUST-12345-ACME"; // From your webhook payload

   Organization organization = scalekit.organization().getByExternalId(customerId);

   if (organization != null) {
       System.out.println("Found organization: " + organization.getDisplayName());
       // Update billing status, plan, etc.
       String billingId = (String) organization.getMetadata().get("billing_customer_id");
       updateCustomerBilling(billingId);
   }
   ```
   </TabItem>
   </Tabs>

3. ### Update external IDs when needed

   If your customer IDs change or you need to migrate identifier formats, you can update external IDs for existing organizations.

   <Tabs syncKey="tech-stack">
   <TabItem value="node" label="Node.js">
   ```javascript title="Update external ID"
   const updatedOrg = await scalekit.organization.update(organizationId, {
     external_id: 'NEW-CUST-12345-ACME'
   });

   console.log('External ID updated:', updatedOrg.external_id);
   ```
   </TabItem>
   <TabItem value="python" label="Python">
   ```python title="Update external ID"
   updated_org = scalekit.organization.update(organization_id, {
       'external_id': 'NEW-CUST-12345-ACME'
   })

   print(f'External ID updated: {updated_org.external_id}')
   ```
   </TabItem>
   <TabItem value="go" label="Go">
   ```go title="Update external ID"
   updatedOrg, err := scalekit.Organization.Update(organizationId, OrganizationUpdateOptions{
       ExternalId: "NEW-CUST-12345-ACME",
   })

   fmt.Printf("External ID updated: %s\n", updatedOrg.ExternalId)
   ```
   </TabItem>
   <TabItem value="java" label="Java">
   ```java title="Update external ID"
   Organization updatedOrg = scalekit.organization().update(organizationId, Map.of(
       "external_id", "NEW-CUST-12345-ACME"
   ));

   System.out.println("External ID updated: " + updatedOrg.getExternalId());
   ```
   </TabItem>
   </Tabs>
</Steps>


## User external IDs and metadata

Just as organizations need external identifiers, users often require integration with existing systems. User external IDs and metadata work similarly to organization identifiers, enabling you to link Scalekit users with your CRM, HR systems, and other business applications.

### When to use user external IDs and metadata

<CardGrid>

<div>
**External IDs** link Scalekit users to your existing systems:
- Reference users in your database, CRM, or billing system
- Maintain consistent user identification across multiple platforms
- Enable easy data synchronization and lookups
</div>

<div>
**Metadata** stores additional user attributes:
- Organizational information (department, location, role level)
- Business context (territory, quota, access permissions)
- Integration data (external system IDs, custom properties)
</div>



</CardGrid>

### Set user external IDs and metadata during user creation

<Tabs syncKey="tech-stack">
<TabItem value="node" label="Node.js">

```javascript title="Create user with external ID and metadata" wrap frame="terminal" ins={4-12}
// Use case: Create user during system migration or bulk import with existing system references
const { user } = await scalekit.user.createUserAndMembership("<organizationId>", {
  email: "john.doe@company.com",
  externalId: "SALESFORCE-003921",
  metadata: {
    department: "Sales",
    employeeId: "EMP-002",
    territory: "West Coast",
    quota: 150000,
    crmAccountId: "ACC-789",
    hubspotContactId: "12345",
  },
  userProfile: {
    firstName: "John",
    lastName: "Doe",
  },
  sendInvitationEmail: true,
});
```

</TabItem>
<TabItem value="python" label="Python">

```python title="Create user with external ID and metadata" wrap frame="terminal" ins={4-12}
# Use case: Create user during system migration or bulk import with existing system references
user_response = scalekit.user.create_user_and_membership(
    "<organization_id>",
    email="john.doe@company.com",
    external_id="SALESFORCE-003921",
    metadata={
        "department": "Sales",
        "employee_id": "EMP-002",
        "territory": "West Coast",
        "quota": 150000,
        "crm_account_id": "ACC-789",
        "hubspot_contact_id": "12345"
    },
    user_profile={
        "first_name": "John",
        "last_name": "Doe"
    },
    send_invitation_email=True
)
```

</TabItem>
<TabItem value="go" label="Go">

```go title="Create user with external ID and metadata" wrap frame="terminal" ins={4-12}
// Use case: Create user during system migration or bulk import with existing system references
newUser := &usersv1.CreateUser{
    Email: "john.doe@company.com",
    ExternalId: "SALESFORCE-003921",
    Metadata: map[string]string{
        "department":          "Sales",
        "employee_id":         "EMP-002",
        "territory":           "West Coast",
        "quota":               "150000",
        "crm_account_id":      "ACC-789",
        "hubspot_contact_id":  "12345",
    },
    UserProfile: &usersv1.CreateUserProfile{
        FirstName: "John",
        LastName:  "Doe",
    },
}
userResp, err := scalekitClient.User().CreateUserAndMembership(
    ctx,
    "<organizationId>",
    newUser,
    true, // sendInvitationEmail
)
```

</TabItem>
<TabItem value="java" label="Java">

```java title="Create user with external ID and metadata" wrap frame="terminal" ins={4-12}
// Use case: Create user during system migration or bulk import with existing system references
CreateUser createUser = CreateUser.newBuilder()
    .setEmail("john.doe@company.com")
    .setExternalId("SALESFORCE-003921")
    .putMetadata("department", "Sales")
    .putMetadata("employee_id", "EMP-002")
    .putMetadata("territory", "West Coast")
    .putMetadata("quota", "150000")
    .putMetadata("crm_account_id", "ACC-789")
    .putMetadata("hubspot_contact_id", "12345")
    .setUserProfile(
        CreateUserProfile.newBuilder()
            .setFirstName("John")
            .setLastName("Doe")
            .build())
    .build();

CreateUserAndMembershipRequest createUserReq = CreateUserAndMembershipRequest.newBuilder()
    .setUser(createUser)
    .setSendInvitationEmail(true)
    .build();

CreateUserAndMembershipResponse userResp = scalekitClient.users()
    .createUserAndMembership("<organizationId>", createUserReq);
```

</TabItem>

</Tabs>

### Update user external IDs and metadata for existing users

<Tabs syncKey="tech-stack">
<TabItem value="node" label="Node.js">

```javascript title="Update user external ID and metadata" wrap frame="terminal" ins={3-11}
// Use case: Link user with external systems (CRM, HR) and track custom attributes in a single call
const updatedUser = await scalekit.user.updateUser("<userId>", {
  externalId: "SALESFORCE-003921",
  metadata: {
    department: "Sales",
    employeeId: "EMP-002",
    territory: "West Coast",
    quota: 150000,
    crmAccountId: "ACC-789",
    hubspotContactId: "12345",
  },
});
```

</TabItem>
<TabItem value="python" label="Python">

```python title="Update user external ID and metadata" wrap frame="terminal" ins={3-11}
# Use case: Link user with external systems (CRM, HR) and track custom attributes in a single call
updated_user = scalekit.user.update_user(
    "<user_id>",
    external_id="SALESFORCE-003921",
    metadata={
        "department": "Sales",
        "employee_id": "EMP-002",
        "territory": "West Coast",
        "quota": 150000,
        "crm_account_id": "ACC-789",
        "hubspot_contact_id": "12345"
    }
)
```

</TabItem>
<TabItem value="go" label="Go">

```go title="Update user external ID and metadata" frame="terminal"
// Use case: Link user with external systems (CRM, HR) and track custom attributes in a single call
updateUser := &usersv1.UpdateUser{
    ExternalId: "SALESFORCE-003921",
    Metadata: map[string]string{
        "department":          "Sales",
        "employee_id":         "EMP-002",
        "territory":           "West Coast",
        "quota":               "150000",
        "crm_account_id":      "ACC-789",
        "hubspot_contact_id":  "12345",
    },
}
updatedUser, err := scalekitClient.User().UpdateUser(
    ctx,
    "<userId>",
    updateUser,
)
```

</TabItem>
<TabItem value="java" label="Java">

```java title="Update user external ID and metadata" frame="terminal" "setExternalId" "putMetadata"
// Use case: Link user with external systems (CRM, HR) and track custom attributes in a single call
UpdateUser updateUser = UpdateUser.newBuilder()
    .setExternalId("SALESFORCE-003921")
    .putMetadata("department", "Sales")
    .putMetadata("employee_id", "EMP-002")
    .putMetadata("territory", "West Coast")
    .putMetadata("quota", "150000")
    .putMetadata("crm_account_id", "ACC-789")
    .putMetadata("hubspot_contact_id", "12345")
    .build();

UpdateUserRequest updateReq = UpdateUserRequest.newBuilder()
    .setUser(updateUser)
    .build();

User updatedUser = scalekitClient.users().updateUser("<userId>", updateReq);
```

</TabItem>

</Tabs>

### Find users by external ID

<Tabs syncKey="tech-stack">
<TabItem value="node" label="Node.js">

```javascript title="Find user by external ID" wrap frame="terminal"
// Use case: Look up Scalekit user when you have your system's user ID
const user = await scalekit.user.getUserByExternalId("<organizationId>", "SALESFORCE-003921");
console.log(`Found user: ${user.email} with ID: ${user.id}`);
```

</TabItem>
<TabItem value="python" label="Python">

```python title="Find user by external ID" wrap frame="terminal"
# Use case: Look up Scalekit user when you have your system's user ID
user = scalekit.user.get_user_by_external_id("<organization_id>", "SALESFORCE-003921")
print(f"Found user: {user['email']} with ID: {user['id']}")
```

</TabItem>
<TabItem value="go" label="Go">

```go title="Find user by external ID" wrap frame="terminal"
// Use case: Look up Scalekit user when you have your system's user ID
user, err := scalekitClient.User().GetUserByExternalId(
    ctx,
    "<organizationId>",
    "SALESFORCE-003921",
)
if err != nil {
    log.Printf("User not found: %v", err)
} else {
    fmt.Printf("Found user: %s with ID: %s\n", user.Email, user.Id)
}
```

</TabItem>
<TabItem value="java" label="Java">

```java title="Find user by external ID" wrap frame="terminal"
// Use case: Look up Scalekit user when you have your system's user ID
try {
    GetUserByExternalIdResponse response = scalekitClient.users()
        .getUserByExternalId("<organizationId>", "SALESFORCE-003921");

    User user = response.getUser();
    System.out.printf("Found user: %s with ID: %s%n", user.getEmail(), user.getId());
} catch (Exception e) {
    System.err.println("User not found: " + e.getMessage());
}
```

</TabItem>

</Tabs>

This integration approach maintains consistent user identity across your system architecture while letting you choose the source of truth for authentication and authorization. Both user and organization external IDs work together to provide complete system integration capabilities.
