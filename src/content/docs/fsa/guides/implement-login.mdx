---
title: "Initiate user login"
description: "Create authorization URLs and redirect users to Scalekit's hosted login page with proper parameters and organization routing."
sidebar:
  label: "Initiate login"
head:
  - tag: style
    content: |
      .sl-markdown-content h2 {
        font-size: var(--sl-text-xl);
      }
      .sl-markdown-content h3 {
        font-size: var(--sl-text-lg);
      }
prev:
  label: "FSA Quickstart"
  link: "/fsa/quickstart/"
next:
  label: "Manage auth methods"
  link: "/fsa/choose-login-methods/"
seeAlso:
  label: "Related guides"
  items:
    - title: "Configure authentication methods"
      icon: "setting"
      url: "/fsa/choose-login-methods/"
    - title: "Handle redirections"
      icon: "forward"
      url: "/fsa/guides/handle-redirections/"
    - title: "Redirect configurations"
      icon: "external"
      url: "/guides/dashboard/redirects/"
    - title: "Customize login page"
      icon: "paintbrush"
      url: "/fsa/guides/login-page-branding/"
---
import { Card, CardGrid, Steps, TabItem, Tabs, Aside, LinkCard } from '@astrojs/starlight/components';

Login initiation is the first step in your authentication flow. You redirect users to Scalekit's hosted login page by creating an authorization URL with the appropriate parameters for your use case.

## Authorization URL structure

The authorization URL contains several parameters that control the authentication behavior:

```sh title="Authorization URL format" showLineNumbers=false
https://<SCALEKIT_ENVIRONMENT_URL>/oauth/authorize?
  response_type=code&
  client_id=<SCALEKIT_CLIENT_ID>&
  redirect_uri=<CALLBACK_URL>&
  scope=openid+profile+email+offline_access&
  organization_id=<ORG_ID>&
  connection_id=<CONNECTION_ID>&
  login_hint=<USER_EMAIL>&
  state=<RANDOM_STATE>
```

### Required parameters

| Parameter | Description |
|-----------|-------------|
| `response_type` | Always `code` for authorization code flow |
| `client_id` | Your Scalekit client ID |
| `redirect_uri` | Your callback URL where users return after authentication |
| `scope` | Permissions requested. Include `offline_access` for refresh tokens |

### Organization routing parameters

Use these parameters to direct users to specific authentication methods:

| Parameter | Description | Example |
|-----------|-------------|---------|
| `organization_id` | Route to organization's configured auth method | `org_12345` |
| `connection_id` | Direct to specific SSO connection | `conn_67890` |
| `login_hint` | User's email for domain-based routing | `user@company.com` |

<Aside type="tip" title="Parameter precedence">
Scalekit evaluates routing in this order: `connection_id` → `organization_id` → `login_hint` domain extraction.
</Aside>

## Create authorization URLs using Scalekit SDKs

Use the Scalekit SDK to generate properly formatted authorization URLs. The SDK handles parameter encoding and validation automatically.

<Tabs syncKey="tech-stack">
<TabItem value="node" label="Node.js">
```javascript title="Express.js" collapse={1-2} {5-7,9,12} "getAuthorizationUrl"
import { Scalekit } from '@scalekit-sdk/node';

const scalekit = new Scalekit(/* your credentials */);

// Basic authorization URL for general login
const redirectUri = 'https://yourapp.com/auth/callback';
const options = {
  scopes: ['openid', 'profile', 'email', 'offline_access'],
};

const authorizationUrl = scalekit.getAuthorizationUrl(redirectUri, options);

// Redirect user to Scalekit's hosted login page
res.redirect(authorizationUrl);
```
</TabItem>
<TabItem value="python" label="Python">
```python title="Flask" collapse={1-3} {6-8,10,12} "get_authorization_url"
from scalekit import ScalekitClient, AuthorizationUrlOptions

scalekit = ScalekitClient(/* your credentials */)

# Basic authorization URL for general login
redirect_uri = 'https://yourapp.com/auth/callback'
options = AuthorizationUrlOptions(
    scopes=['openid', 'profile', 'email', 'offline_access']
)

authorization_url = scalekit.get_authorization_url(redirect_uri, options)

# Redirect user to Scalekit's hosted login page
return redirect(authorization_url)
```
</TabItem>
<TabItem value="go" label="Go">
```go title="Gin" collapse={1-4} {7-9,11,13} "GetAuthorizationUrl"
import "github.com/scalekit-inc/scalekit-sdk-go"

scalekit := scalekit.NewScalekitClient(/* your credentials */)

// Basic authorization URL for general login
redirectUri := "https://yourapp.com/auth/callback"
options := scalekit.AuthorizationUrlOptions{
    Scopes: []string{"openid", "profile", "email", "offline_access"},
}

authorizationUrl, err := scalekit.GetAuthorizationUrl(redirectUri, options)

// Redirect user to Scalekit's hosted login page
c.Redirect(http.StatusFound, authorizationUrl.String())
```
</TabItem>
<TabItem value="java" label="Java">
```java title="Spring" collapse={1-4} {7-9,11,13} "getAuthorizationUrl"
import com.scalekit.ScalekitClient;
import com.scalekit.internal.http.AuthorizationUrlOptions;

ScalekitClient scalekit = new ScalekitClient(/* your credentials */);

// Basic authorization URL for general login
String redirectUri = "https://yourapp.com/auth/callback";
AuthorizationUrlOptions options = new AuthorizationUrlOptions();
options.setScopes(Arrays.asList("openid", "profile", "email", "offline_access"));

URL authorizationUrl = scalekit.authentication().getAuthorizationUrl(redirectUri, options);

// Redirect user to Scalekit's hosted login page
return new RedirectView(authorizationUrl.toString());
```
</TabItem>
</Tabs>

### Organization-specific login

Route users to their organization's authentication method by including organization parameters:

<Tabs syncKey="tech-stack">
<TabItem value="node" label="Node.js">
```javascript title="Organization routing" {3-5} "organizationId"
const options = {
  scopes: ['openid', 'profile', 'email', 'offline_access'],
  organizationId: 'org_12345',        // Route to org's auth method
  loginHint: 'user@company.com',      // User context for domain routing
  state: 'random_csrf_token'          // CSRF protection
};

const authorizationUrl = scalekit.getAuthorizationUrl(redirectUri, options);
```
</TabItem>
<TabItem value="python" label="Python">
```python title="Organization routing" {3-5} "organization_id"
options = AuthorizationUrlOptions(
    scopes=['openid', 'profile', 'email', 'offline_access'],
    organization_id='org_12345',       # Route to org's auth method
    login_hint='user@company.com',     # User context for domain routing
    state='random_csrf_token'          # CSRF protection
)
```
</TabItem>
<TabItem value="go" label="Go">
```go title="Organization routing" {3-5} "OrganizationId"
options := scalekit.AuthorizationUrlOptions{
    Scopes: []string{"openid", "profile", "email", "offline_access"},
    OrganizationId: "org_12345",       // Route to org's auth method
    LoginHint: "user@company.com",     // User context for domain routing
    State: "random_csrf_token"         // CSRF protection
}
```
</TabItem>
<TabItem value="java" label="Java">
```java title="Organization routing" {3-5} "setOrganizationId"
AuthorizationUrlOptions options = new AuthorizationUrlOptions();
options.setScopes(Arrays.asList("openid", "profile", "email", "offline_access"));
options.setOrganizationId("org_12345");        // Route to org's auth method
options.setLoginHint("user@company.com");      // User context for domain routing
options.setState("random_csrf_token");         // CSRF protection
```
</TabItem>
</Tabs>

## Login page and user experience

After creating the authorization URL, users are redirected to Scalekit's hosted login page. This page presents authentication options based on your configuration and the user's organization.

The hosted login page handles:
- **Method selection** - Users choose from available auth methods (passwordless, social, SSO)
- **Organization detection** - Automatic routing based on email domain or organization parameters
- **Security policies** - Enforcement of organization-specific authentication requirements
- **Error handling** - Clear messaging for authentication failures

<LinkCard
  title="Customize login page branding"
  href="/fsa/guides/login-page-branding/"
  description="Apply your brand colors, logo, and styling to the hosted login page"
/>

## Common login scenarios

### Multi-tenant applications
Route users to their organization's authentication method:

```javascript title="Tenant-specific routing"
// Extract organization from subdomain or user input
const orgId = getOrganizationFromRequest(req);

const options = {
  scopes: ['openid', 'profile', 'email', 'offline_access'],
  organizationId: orgId,
};
```

### Email-based routing
Let Scalekit determine the authentication method from the user's email domain:

```javascript title="Domain-based routing"
const options = {
  scopes: ['openid', 'profile', 'email', 'offline_access'],
  loginHint: userEmail,  // Scalekit extracts domain and routes accordingly
};
```

### Force re-authentication
Require users to authenticate even if they have an active session:

```javascript title="Force login"
const options = {
  scopes: ['openid', 'profile', 'email', 'offline_access'],
  prompt: 'login',  // Forces authentication flow
};
```

<Aside type="caution" title="Security considerations">
Always include the `state` parameter with a random, unguessable value to prevent CSRF attacks. Validate this value when processing the callback.
</Aside>
