---
// Import the `<StarlightPage>` component first to set up cascade layers
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro'
import SandboxWrapper from '../../../components/code-samples/SandboxWrapper.tsx'

// This route needs to be server-rendered because sandboxId is dynamic
export const prerender = false

interface Props {
  sandboxId: string
}

const { sandboxId } = Astro.params

// Get API key and orgid from environment variables
const apiKey = import.meta.env.PUBLIC_SAMPLEAPP_API_KEY || ''
const orgid = import.meta.env.PUBLIC_SAMPLEAPP_ORGID || 'scalekit'

// Page metadata
const template = 'splash' as const
const frontmatter = {
  title: `Code Sample: ${sandboxId}`,
  description: `Interactive code sample for ${sandboxId}`,
  template,
  editUrl: false as const,
  head: [
    {
      tag: 'style' as const,
      content: `
        footer {
          display: none !important;
        }
        .full-page-app {
          width: 100%;
          max-width: 100%;
          margin: 0;
          padding: 0;
          position: sticky;
          top: var(--sl-nav-height);
          height: calc(100vh - var(--sl-nav-height));
          overflow: auto;
        }
      `,
    },
  ],
}
---

<div class="full-page-app">
  <SandboxWrapper client:load apiKey={apiKey} orgid={orgid} sandboxId={sandboxId} env={{}} />
</div>

<StarlightPage frontmatter={frontmatter}>
  <!-- Hidden content to initialize Starlight page structure -->
  <div style="display: none;"></div>
</StarlightPage>
